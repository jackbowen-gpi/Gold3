[pytest]
# Pytest configuration
python_files = tests.py test_*.py *_tests.py
addopts = --strict-config --disable-warnings --tb=short --cov=. --cov-report=html --cov-report=term-missing --cov-report=xml

# Django settings
DJANGO_SETTINGS_MODULE = gchub_db.test_settings
django_find_project = true
django_debug_mode = true

# Test discovery
testpaths = tests gchub_db/tests
norecursedirs = backups backend bin includes xml_io .history .venv .git .github __pycache__ .mypy_cache .pytest_cache .ruff_cache

# Coverage configuration
[coverage:run]
source = .
omit =
    */tests/*
    */test_*.py
    */conftest.py
    */migrations/*
    */__pycache__/*
    .venv/*
    .tox/*
    setup.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod

# Markers for different test types
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, with dependencies)
    smoke: Basic smoke tests for CI
    slow: Slow-running tests
    external: Tests requiring external services
    mock: Tests using mock systems

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

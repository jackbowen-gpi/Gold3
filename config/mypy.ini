[mypy]
python_version = 3.11
# Be permissive for this legacy codebase during CI / pre-commit
ignore_missing_imports = True
follow_imports = silent
allow_untyped_globals = True
warn_unused_ignores = False
disallow_untyped_defs = False
check_untyped_defs = False
files = ., src/

# Exclude specific files and folders that trigger duplicate-module mapping
# (mypy sometimes discovers the same file via multiple import paths in this layout)
exclude = (?x)(^bin_functions\.py$|^bin/|^scripts/|^dev/|^daemons/|^middleware/|^tests/|^settings_dloader\.py$)

# Silence noisy legacy modules and vendored packages
[mypy-includes.*]
ignore_errors = True

[mypy-gchub_db.*]
ignore_errors = True

[mypy-scripts.*]
ignore_errors = True

[mypy-tests.*]
ignore_errors = True

[mypy-bin.*]
ignore_errors = True

[mypy-daemons.*]
ignore_errors = True

[mypy-tools.*]
ignore_errors = True

[mypy-settings_dloader]
ignore_errors = True

# Third-party libraries often used without stubs in this environment
[mypy-django.*]
ignore_missing_imports = True

[mypy-pytest.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-plyer.*]
ignore_missing_imports = True

# Django plugin setting
[mypy.plugins.django_stubs]
django_settings_module = gchub_db.settings

# Keep explicit package bases disabled by default to avoid path mapping surprises
explicit_package_bases = False

mypy_path = .

# Disabled noisy error codes for legacy code
disable_error_code = no-untyped-def,var-annotated,assignment,attr-defined,union-attr,import-untyped,no-any-return,no-redef,misc,type-var,unreachable,call-arg,arg-type,operator,has-type,used-before-def
